# Doctest

Doctest runs fenced code blocks inside Markdown/MDX files as tests. By default it runs every fenced block with a known language, unless you opt out with `no-doctest`.

## Quick usage

```sh
bun doctest/src/cli.ts --help
```

```sh no-doctest
bun doctest/src/cli.ts --config doctest.config.toml --files doctest/docs/overview.mdx
```

## Runner environment

```sh
test -n "$DOCTEST_ROOT"
test -n "$DOCTEST_TMP"
test -n "$DOCTEST_WORKDIR"
```

## Configuration

Doctest loads `doctest.config.toml` from the repo root (or uses `--config`).

```sh
test -f 'doctest.config.toml'
```

## Lua runner

Set `lua = 'nvim'` to run Lua blocks inside headless Neovim with the repo on `runtimepath`.

## Hooks

Use `hooks.setup` and `hooks.teardown` in `doctest.config.toml` to run commands once per run (for example, booting a database container).

## Opting out

Any fenced block can be skipped with `no-doctest`.

```sh no-doctest
exit 1
```
